import{f as N}from"../chunks/fetch-refresh.CoktrdpI.js";import{h as z,a as g,f as C,d as S,t as k,c as i,e as m}from"../chunks/disclose-version.B-hLH5kf.js";import{p as A,l as E,c as F,a as J,g as n,m as T,b as Y,M as f,r as B}from"../chunks/runtime.DDjRgbeA.js";import{b as M,i as O}from"../chunks/index.DJuFnhGY.js";import{i as q}from"../chunks/lifecycle.Dwr_-_8E.js";import"../chunks/entry.naXCMhCl.js";import{B as D}from"../chunks/Button.Dse6T-Vv.js";import"../chunks/HeaderNav.svelte_svelte_type_style_lang.BOaGD4ME.js";import{C as G}from"../chunks/Card.DpYgZsTY.js";const H=async({fetch:w,parent:e})=>{var h;const a=t=>N(w,t),{user:l}=await e(),P=a("/api/spotify/browse/new-releases?limit=6"),r=a("/api/spotify/browse/featured-playlists?limit=6"),s=a(`/api/spotify/users/${l==null?void 0:l.id}/playlists?limit=6`),o=await a("api/spotify/browse/categories"),d=o.ok?await o.json():void 0,c=d?(h=d.categories)==null?void 0:h.items.sort(()=>.5-Math.random()).slice(0,3):[],v=c.map(t=>a(`/api/spotify/browse/categories/${t.id}/playlists?limit=6`)),[p,u,y,...b]=await Promise.all([P,r,s,...v]);return{newReleases:p.ok?await p.json():void 0,featuredPlaylists:u.ok?await u.json():void 0,userPlaylists:y.ok?await y.json():void 0,homeCategories:c,categoriesPlaylists:await Promise.all(b.map(async t=>t.ok?await t.json():void 0))}},te=Object.freeze(Object.defineProperty({__proto__:null,load:H},Symbol.toStringTag,{value:"Module"}));var I=k('See All <span class="visually-hidden"> </span>',1),K=k('<div class="grid-item"><!></div>'),L=k('<section class="content-row svelte-1f8lnf6"><div class="content-row-header svelte-1f8lnf6"><div class="right"><h2 class="section-title svelte-1f8lnf6"> </h2></div> <div class="left"><!></div></div> <div class="grid-items"></div></section>');function se(w,e){A(e,!1);let a=T([]);E(()=>(Y(e.data),n(a)),()=>{e.data.newReleases&&n(a).push({title:"New Releases",path:"/section/new-releases",items:e.data.newReleases.albums.items}),e.data.featuredPlaylists&&n(a).push({title:"Featured Playlists",path:"/section/featured-playlists",items:e.data.featuredPlaylists.playlists.items}),e.data.homeCategories.forEach((r,s)=>{const o=e.data.categoriesPlaylists[s];o&&n(a).push({title:r.name,path:`/category/${r.id}`,items:o.playlists.items})}),e.data.userPlaylists&&n(a).push({title:"Your Playlists",path:"/playlists",items:e.data.userPlaylists.items})}),F(),q();var l=z(),P=C(l);M(P,1,()=>n(a),O,(r,s,o)=>{var d=L(),c=i(d),v=i(c),p=i(v),u=i(p),y=m(m(v,!0)),b=i(y);D(b,{element:"a",get href(){return f(s).path},variant:"outline",children:(t,x)=>{var R=I(),_=m(C(R,!0)),j=i(_);B(()=>S(j,f(s).title)),g(t,R)}});var h=m(m(c,!0));M(h,9,()=>f(s).items,O,(t,x,R)=>{var _=K(),j=i(_);G(j,{get item(){return f(x)}}),g(t,_)}),B(()=>S(u,f(s).title)),g(r,d)}),g(w,l),J()}export{se as component,te as universal};
